# ğŸµ Rhythme

**"Rhythm + Lead Me"** - í˜‘ì—… ë¹„íŠ¸ ì œì‘ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜

<div align="center">

![Rhythme Logo](./docs/images/logo.png)

[![Deploy with Vercel](https://vercel.com/button)](https://vercel.com)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

**[Live Demo](https://rhythme.vercel.app)** | **[Documentation](./docs)** | **[Development Blog](https://github.com/tygwan/rhytheme/wiki)**

</div>

## ğŸš§ Development Status

> **Current Phase**: ğŸ—ï¸ Project Initialization & Infrastructure Setup
> **Last Updated**: 2024.12.02

---

## ğŸ“– í”„ë¡œì íŠ¸ ì†Œê°œ

Rhythmeì€ **í„´ì œ ë°©ì‹**ìœ¼ë¡œ ì°¸ì—¬ìë“¤ì´ í•¨ê»˜ ë¹„íŠ¸ë¥¼ ìŒ“ì•„ê°€ë©° ìŒì•…ì„ ë§Œë“œëŠ” í˜‘ì—… ì›¹ í”Œë«í¼ì…ë‹ˆë‹¤.

```
"ì°¸ì—¬ìë“¤ì´ í•˜ë‚˜ì”© ë¹„íŠ¸ë¥¼ ì°ì–´ê°€ë©° rhythmì„ lead me (ë¦¬ë“œë¯¸) í•œë‹¤"
```

### ğŸ¯ ê¸°íš ë°°ê²½

- ì „í†µì ì¸ ìŒì•… ì œì‘ ë„êµ¬(DAW)ëŠ” ì „ë¬¸ê°€ ì¤‘ì‹¬ìœ¼ë¡œ ì„¤ê³„ë˜ì–´ ì§„ì…ì¥ë²½ì´ ë†’ìŒ
- ì‹¤ì‹œê°„ í˜‘ì—… ë„êµ¬ë“¤ì€ ë™ì‹œ í¸ì§‘ìœ¼ë¡œ ì¸í•œ í˜¼ì„  ë°œìƒ
- ìŒì•…ì„ ì‰½ê²Œ ë§Œë“¤ë©´ì„œë„ í˜‘ì—…ì˜ ì¬ë¯¸ë¥¼ ëŠë‚„ ìˆ˜ ìˆëŠ” í”Œë«í¼ì˜ í•„ìš”ì„±

### ğŸ’¡ í•µì‹¬ ì°¨ë³„ì 

- ğŸ® **í„´ì œ í˜‘ì—…** - ìˆœì°¨ì  ë¹„íŠ¸ ì¶”ê°€ë¡œ í˜¼ì„  ë°©ì§€
- ğŸ“‹ **ëŒ€ê¸°ì—´ ì‹œìŠ¤í…œ** - ì²´ê³„ì ì¸ ì°¸ì—¬ ìˆœì„œ ê´€ë¦¬
- ğŸšª **ì„¸ì…˜ ê¸°ë°˜ ë°©** - ë…ë¦½ì ì¸ ìŒì•… ì œì‘ ê³µê°„
- ğŸ¨ **ëŒ€ì‹œë³´ë“œ ê³µìœ ** - ì™„ì„±ëœ ì‘í’ˆì„ ì»¤ë®¤ë‹ˆí‹°ì™€ ê³µìœ 

---

## ğŸ“‘ ëª©ì°¨

1. [í”„ë¡œì íŠ¸ ì†Œê°œ](#-í”„ë¡œì íŠ¸-ì†Œê°œ)
2. [ì£¼ìš” ê¸°ëŠ¥](#-ì£¼ìš”-ê¸°ëŠ¥)
3. [ê¸°ìˆ  ìŠ¤íƒ](#-ê¸°ìˆ -ìŠ¤íƒ)
4. [í”„ë¡œì íŠ¸ ê¸°ê°„](#-í”„ë¡œì íŠ¸-ê¸°ê°„)
5. [íŒ€ì›](#-íŒ€ì›)
6. [í”„ë¡œì íŠ¸ ì„¸íŒ…](#-í”„ë¡œì íŠ¸-ì„¸íŒ…)
7. [ì•„í‚¤í…ì²˜](#-ì•„í‚¤í…ì²˜)
8. [ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„](#-ë°ì´í„°ë² ì´ìŠ¤-ì„¤ê³„)
9. [ì£¼ìš” êµ¬í˜„ ë‚´ìš©](#-ì£¼ìš”-êµ¬í˜„-ë‚´ìš©)
10. [ê°œë°œ ê¸°ë¡](#-ê°œë°œ-ê¸°ë¡)

---

## âœ¨ ì£¼ìš” ê¸°ëŠ¥

### ğŸ¹ ë¹„íŠ¸ ì œì‘

- **16-Step Sequencer**: ì§ê´€ì ì¸ ê·¸ë¦¬ë“œ ê¸°ë°˜ ë¹„íŠ¸ ì œì‘
- **8ê°€ì§€ ì•…ê¸°**: Kick, Snare, Hi-Hat, Clap, Tom, Synth, Bass, Percussion
- **ì‹¤ì‹œê°„ ì¬ìƒ**: BPM ì¡°ì ˆ ë° ì¦‰ì‹œ ë¯¸ë¦¬ë“£ê¸°
- **ì˜¤ë””ì˜¤ ì´í™íŠ¸**: Reverb, Delay, Octave ë“± ë‹¤ì–‘í•œ íš¨ê³¼

### ğŸšª ì„¸ì…˜ ê´€ë¦¬

- **ë°© ìƒì„±**: ì»¤ìŠ¤í…€ ì„¤ì •ìœ¼ë¡œ ì„¸ì…˜ ìƒì„±
- **ì¸ì› ì œí•œ**: ì„¸ì…˜ë‹¹ 4-8ëª… ê¶Œì¥
- **ëŒ€ê¸°ì—´ ì‹œìŠ¤í…œ**: ìë™ í„´ ê´€ë¦¬
- **ì‹¤ì‹œê°„ ë™ê¸°í™”**: WebSocket ê¸°ë°˜ ìƒíƒœ ê³µìœ 

### ğŸ¨ ëŒ€ì‹œë³´ë“œ

- **ìŒì•… ê°¤ëŸ¬ë¦¬**: ì™„ì„±ëœ íŠ¸ë™ ê³µê°œ ê³µìœ 
- **ì¬ìƒ & ë‹¤ìš´ë¡œë“œ**: ì–¸ì œë“  ì¬ìƒ ë° ë‚´ë³´ë‚´ê¸°
- **ì¢‹ì•„ìš” & ëŒ“ê¸€**: ì»¤ë®¤ë‹ˆí‹° ìƒí˜¸ì‘ìš©
- **í•„í„°ë§**: ìµœì‹ ìˆœ, ì¸ê¸°ìˆœ ì •ë ¬

---

## ğŸ›  ê¸°ìˆ  ìŠ¤íƒ

### Frontend

<div align="center">

![Next.js](https://img.shields.io/badge/Next.js_14-000000?style=for-the-badge&logo=next.js&logoColor=white)
![TypeScript](https://img.shields.io/badge/TypeScript-3178C6?style=for-the-badge&logo=typescript&logoColor=white)
![Tailwind CSS](https://img.shields.io/badge/Tailwind_CSS-38B2AC?style=for-the-badge&logo=tailwind-css&logoColor=white)
![Tone.js](https://img.shields.io/badge/Tone.js-000000?style=for-the-badge&logo=javascript&logoColor=white)
![Framer Motion](https://img.shields.io/badge/Framer_Motion-0055FF?style=for-the-badge&logo=framer&logoColor=white)

</div>

### Backend

<div align="center">

![Node.js](https://img.shields.io/badge/Node.js-339933?style=for-the-badge&logo=node.js&logoColor=white)
![Express](https://img.shields.io/badge/Express-000000?style=for-the-badge&logo=express&logoColor=white)
![Socket.io](https://img.shields.io/badge/Socket.io-010101?style=for-the-badge&logo=socket.io&logoColor=white)
![PostgreSQL](https://img.shields.io/badge/PostgreSQL-4169E1?style=for-the-badge&logo=postgresql&logoColor=white)
![Redis](https://img.shields.io/badge/Redis-DC382D?style=for-the-badge&logo=redis&logoColor=white)
![Prisma](https://img.shields.io/badge/Prisma-2D3748?style=for-the-badge&logo=prisma&logoColor=white)

</div>

### Deployment & Infrastructure

<div align="center">

![Vercel](https://img.shields.io/badge/Vercel-000000?style=for-the-badge&logo=vercel&logoColor=white)
![Railway](https://img.shields.io/badge/Railway-0B0D0E?style=for-the-badge&logo=railway&logoColor=white)
![Supabase](https://img.shields.io/badge/Supabase-3ECF8E?style=for-the-badge&logo=supabase&logoColor=white)
![Cloudflare](https://img.shields.io/badge/Cloudflare-F38020?style=for-the-badge&logo=cloudflare&logoColor=white)

</div>

### Development Tools

<div align="center">

![GitHub](https://img.shields.io/badge/GitHub-181717?style=for-the-badge&logo=github&logoColor=white)
![ESLint](https://img.shields.io/badge/ESLint-4B32C3?style=for-the-badge&logo=eslint&logoColor=white)
![Prettier](https://img.shields.io/badge/Prettier-F7B93E?style=for-the-badge&logo=prettier&logoColor=black)

</div>

---

## ğŸ“… í”„ë¡œì íŠ¸ ê¸°ê°„

**2024.11.24 - ì§„í–‰ ì¤‘**

- **ì„¤ê³„ & ê¸°íš**: 2024.11.24 - 2024.11.27
- **ê°œë°œ**: 2024.12.02 - ì§„í–‰ ì¤‘
- **í…ŒìŠ¤íŠ¸ & ë°°í¬**: ì˜ˆì •

---

## ğŸ‘¥ íŒ€ì›

<div align="center">

| Role | Name | GitHub |
|:---:|:---:|:---:|
| **Full Stack Developer** | tygwan | [@tygwan](https://github.com/tygwan) |

</div>

---

## âš™ï¸ í”„ë¡œì íŠ¸ ì„¸íŒ…

### Prerequisites

- Node.js 18.x ì´ìƒ
- npm ë˜ëŠ” yarn
- PostgreSQL (ì„ íƒì‚¬í•­, Supabase ì‚¬ìš© ê°€ëŠ¥)
- Redis (ì„ íƒì‚¬í•­, Upstash ì‚¬ìš© ê°€ëŠ¥)

### Installation

```bash
# Repository í´ë¡ 
git clone https://github.com/tygwan/rhytheme.git
cd rhytheme

# Frontend ì˜ì¡´ì„± ì„¤ì¹˜
npm install

# Backend ì˜ì¡´ì„± ì„¤ì¹˜
cd server
npm install
cd ..
```

### Environment Variables

**Frontend (`.env.local`)**

```env
NEXT_PUBLIC_API_URL=http://localhost:3001
NEXT_PUBLIC_SOCKET_URL=http://localhost:3001
```

**Backend (`server/.env`)**

```env
DATABASE_URL=postgresql://user:password@localhost:5432/rhytheme
REDIS_URL=redis://localhost:6379
JWT_SECRET=your-secret-key
PORT=3001
NODE_ENV=development
```

### Running Locally

```bash
# Frontend ì‹¤í–‰ (í„°ë¯¸ë„ 1)
npm run dev

# Backend ì‹¤í–‰ (í„°ë¯¸ë„ 2)
cd server
npm run dev
```

í”„ë¡ íŠ¸ì—”ë“œ: [http://localhost:3000](http://localhost:3000)  
ë°±ì—”ë“œ API: [http://localhost:3001](http://localhost:3001)

---

## ğŸ— ì•„í‚¤í…ì²˜

### System Architecture

```mermaid
graph TB
    subgraph Client
        A[Next.js Frontend]
        B[Tone.js Audio Engine]
    end
    
    subgraph Server
        C[Express API]
        D[Socket.io Server]
    end
    
    subgraph Database
        E[(PostgreSQL)]
        F[(Redis)]
    end
    
    subgraph Storage
        G[Cloudflare R2]
    end
    
    A -->|REST API| C
    A -->|WebSocket| D
    B -->|Audio Export| G
    C --> E
    D --> F
    C --> G
```

### Frontend Architecture

```
src/
â”œâ”€â”€ app/                    # Next.js App Router
â”‚   â”œâ”€â”€ page.tsx           # Landing Page
â”‚   â”œâ”€â”€ session/[id]/      # Session Room
â”‚   â””â”€â”€ dashboard/         # Music Gallery
â”œâ”€â”€ components/            # React Components
â”‚   â”œâ”€â”€ BeatSequencer.tsx  # ë¹„íŠ¸ ì œì‘ ê·¸ë¦¬ë“œ
â”‚   â”œâ”€â”€ AudioEngine.tsx    # Tone.js ì˜¤ë””ì˜¤ ì—”ì§„
â”‚   â”œâ”€â”€ QueuePanel.tsx     # ëŒ€ê¸°ì—´ UI
â”‚   â””â”€â”€ SessionControls.tsx
â”œâ”€â”€ hooks/                 # Custom React Hooks
â”œâ”€â”€ lib/                   # Utilities
â””â”€â”€ styles/                # Global Styles
```

### Backend Architecture

```
server/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ index.ts           # Express ì„œë²„ ì§„ì…ì 
â”‚   â”œâ”€â”€ routes/            # REST API ë¼ìš°íŠ¸
â”‚   â”‚   â”œâ”€â”€ auth.ts
â”‚   â”‚   â”œâ”€â”€ sessions.ts
â”‚   â”‚   â””â”€â”€ tracks.ts
â”‚   â”œâ”€â”€ websocket/         # Socket.io í•¸ë“¤ëŸ¬
â”‚   â”‚   â””â”€â”€ sessionHandler.ts
â”‚   â”œâ”€â”€ services/          # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”‚   â”œâ”€â”€ QueueService.ts
â”‚   â”‚   â””â”€â”€ SessionService.ts
â”‚   â”œâ”€â”€ middleware/        # ë¯¸ë“¤ì›¨ì–´
â”‚   â”‚   â”œâ”€â”€ auth.ts
â”‚   â”‚   â”œâ”€â”€ rateLimiter.ts
â”‚   â”‚   â””â”€â”€ validation.ts
â”‚   â””â”€â”€ config/            # ì„¤ì • íŒŒì¼
â””â”€â”€ prisma/
    â””â”€â”€ schema.prisma      # DB ìŠ¤í‚¤ë§ˆ
```

---

## ğŸ’¾ ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„

### ERD

```mermaid
erDiagram
    User ||--o{ Session : creates
    User ||--o{ Track : creates
    Session ||--o{ Track : generates
    
    User {
        string id PK
        string username
        string email
        string password
        datetime createdAt
    }
    
    Session {
        string id PK
        string title
        int maxUsers
        boolean isActive
        string creatorId FK
        json beatData
        string[] participants
        datetime createdAt
        datetime updatedAt
    }
    
    Track {
        string id PK
        string title
        string sessionId FK
        string audioUrl
        json beatData
        string creatorId FK
        int likes
        int plays
        datetime createdAt
    }
```

---

## ğŸ”‘ ì£¼ìš” êµ¬í˜„ ë‚´ìš©

### 1. í„´ì œ ëŒ€ê¸°ì—´ ì‹œìŠ¤í…œ

**Redis ê¸°ë°˜ Queue Service**ë¡œ ì •í™•í•œ ìˆœì„œ ê´€ë¦¬:

```typescript
class QueueService {
  async addToQueue(sessionId: string, userId: string) {
    await redis.rpush(`queue:${sessionId}`, userId);
  }
  
  async getNextInQueue(sessionId: string) {
    return await redis.lpop(`queue:${sessionId}`);
  }
}
```

### 2. ì‹¤ì‹œê°„ ë™ê¸°í™”

**Socket.io**ë¡œ ëª¨ë“  ì°¸ì—¬ìì—ê²Œ ì‹¤ì‹œê°„ ìƒíƒœ ë¸Œë¡œë“œìºìŠ¤íŠ¸:

```typescript
socket.on('update-beat', (data) => {
  // í„´ ê²€ì¦
  if (!validateTurn(sessionId, userId)) return;
  
  // ë¹„íŠ¸ ë°ì´í„° ì €ì¥
  saveBeatData(sessionId, data);
  
  // ëª¨ë“  ì°¸ì—¬ìì—ê²Œ ë¸Œë¡œë“œìºìŠ¤íŠ¸
  io.to(sessionId).emit('session-update', data);
});
```

### 3. Web Audio API

**Tone.js**ë¥¼ í™œìš©í•œ ë¸Œë¼ìš°ì € ê¸°ë°˜ ì˜¤ë””ì˜¤ ì—”ì§„:

```typescript
const synth = new Tone.Sampler({
  urls: { C4: "kick.wav" },
  baseUrl: "/samples/"
}).toDestination();

// 16-step ì‹œí€€ì„œ
const sequence = new Tone.Sequence((time, step) => {
  if (beatData[step]) {
    synth.triggerAttackRelease("C4", "8n", time);
  }
}, [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15]);
```

---

## ğŸ“ ê°œë°œ ê¸°ë¡

ìì„¸í•œ ê°œë°œ ê³¼ì •ì€ [Wiki](https://github.com/tygwan/rhytheme/wiki)ì—ì„œ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ì£¼ìš” ë§ˆì¼ìŠ¤í†¤

- **[2024.11.24]** í”„ë¡œì íŠ¸ ê¸°íš ë° ì•„í‚¤í…ì²˜ ì„¤ê³„
- **[2024.11.25]** ê¸°ìˆ  ìŠ¤íƒ í™•ì • (Vercel + Railway)
- **[2024.11.27]** ë³´ì•ˆ & íŠ¸ë˜í”½ ê´€ë¦¬ ì „ëµ ìˆ˜ë¦½
- **[2024.12.02]** í”„ë¡œì íŠ¸ ì´ˆê¸°í™” ë° ê°œë°œ ì‹œì‘

---

## ğŸ“œ License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

---

## ğŸ™ Acknowledgments

- Inspired by collaborative music-making platforms
- Special thanks to the open-source community
- Audio samples from [Freesound.org](https://freesound.org)

---

<div align="center">

**Made with â¤ï¸ by tygwan**

â­ Star this repository if you find it helpful!

</div>
